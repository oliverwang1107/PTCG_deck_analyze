var jqxhr;PTC.cardSearchComplete_handlers=[],PTC.cardSearchStart_handlers=[],PTC.cardSearchError_handlers=[],PTC.cardSearchEnd_handlers=[],PTC.requrest_start_action=function(e){_.each(PTC.cardSearchStart_handlers,(function(r){r&&r(e)}),this)},PTC.requrest_error_action=function(e){_.each(PTC.cardSearchError_handlers,(function(r){r&&r(e)}),this)},PTC.requrest_complete_action=function(e){_.each(PTC.cardSearchComplete_handlers,(function(r){r&&r(e)}),this)},PTC.requrest_end_action=function(){_.each(PTC.cardSearchEnd_handlers,(function(e){e&&e()}),this)},PTC.searchRequest=function(){var e=PTC.getFormValues();PTC.request(e,PTC.API_DOMAIN+"/card-search/resultAPI.php")}.bind(this),PTC.urlQuerySearchRequest=function(){let e=location.search.substring(1);e=KS.convertObjectByURLParam(e),e.pokemon&&(e.keyword=e.pokemon),e.illust||(e.illust=""),e.keyword=decodeURI(e.keyword).replace(/\+/g," "),e.illust=decodeURI(e.illust),_.each(e,(function(r,t){"on"==r&&(e[t]=1)}),this),PTC.request(e,PTC.API_DOMAIN+"/card-search/resultAPI.php")}.bind(this),PTC.getFormValues=function(){var e=$("#CardSearchForm").serialize();return(e=KS.convertObjectByURLParam(e)).pokemon&&(e.keyword=e.pokemon),e.illust||(e.illust=""),e.keyword=decodeURI(e.keyword).replace(/\+/g," "),e.illust=decodeURI(e.illust),_.each(e,(function(r,t){"on"==r&&(e[t]=1)}),this),e}.bind(this),PTC.paginationRequest=function(e){var r=$.extend({},PTC.getFormValues(),{page:e});PTC.request(r,PTC.API_DOMAIN+"/card-search/resultAPI.php"),setTimeout(function(){$("html,body").animate({scrollTop:$(".SearchResultArea").offset().top-90},0,"swing")}.bind(this),100)}.bind(this),PTC.request=function(e,r){jqxhr&&jqxhr.abort(),PTC.requrest_start_action(e),jqxhr=$.ajax({type:"GET",url:r,timeout:1e4,dataType:"json",data:e}).done(function(e){1==e.result?PTC.requrest_complete_action(e):PTC.requrest_error_action(e)}.bind(this)).fail(function(e){PTC.requrest_error_action(e)}.bind(this)).always(function(){PTC.requrest_end_action()}.bind(this))}.bind(this),this.isHiddenRemove=!1,this.removeHiddenDoms=function(){this.isHiddenRemove||(this.isHiddenRemove=!0,$('input:hidden[name="sc_block"]').remove(),$('input:hidden[name="sc_series_multi[]"]').remove(),$('input:hidden[name="sc_group_multi[]"]').remove(),$('input:hidden[name="sc_group"]').remove(),$('input:hidden[name="pokemon"]').remove(),$('input:hidden[name="firstSetter"]').remove(),$('input:hidden[name="sort"]').remove())},PTC.cardSearchEnd_handlers.push(this.removeHiddenDoms);